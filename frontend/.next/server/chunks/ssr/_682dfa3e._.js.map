{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/components/LoginFormStyle.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"activeTab\": \"LoginFormStyle-module__Wf0BzG__activeTab\",\n  \"inactiveTab\": \"LoginFormStyle-module__Wf0BzG__inactiveTab\",\n  \"loginButton\": \"LoginFormStyle-module__Wf0BzG__loginButton\",\n  \"loginContainer\": \"LoginFormStyle-module__Wf0BzG__loginContainer\",\n  \"loginError\": \"LoginFormStyle-module__Wf0BzG__loginError\",\n  \"loginInput\": \"LoginFormStyle-module__Wf0BzG__loginInput\",\n  \"loginTitle\": \"LoginFormStyle-module__Wf0BzG__loginTitle\",\n  \"modeToggle\": \"LoginFormStyle-module__Wf0BzG__modeToggle\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/markkits/Train-list/frontend/src/app/components/LoginForm.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport styles from '../components/LoginFormStyle.module.css';\n\ninterface User {\n  email: string;\n  role: 'user' | 'admin';\n  name: string;\n  surname: string;\n}\n\ninterface LoginFormProps {\n  onLogin: (user: User, token: string) => void;\n}\n\nexport default function LoginForm({ onLogin }: LoginFormProps) {\n  const [isLoginMode, setIsLoginMode] = useState(true); // Перемикання між логіном і реєстрацією\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [name, setName] = useState('');\n  const [surname, setSurname] = useState('');\n  const [role, setRole] = useState<'user' | 'admin'>('user'); // За замовчуванням user\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSubmit = async () => {\n    setError(null);\n\n    // Перевірка на порожні значення\n    if (!email || !password || (!isLoginMode && (!name || !surname || !role))) {\n      setError('Будь ласка, заповніть всі поля');\n      return;\n    }\n\n    // Валідація email\n    if (!/\\S+@\\S+\\.\\S+/.test(email)) {\n      setError('Будь ласка, введіть правильний email');\n      return;\n    }\n\n    if (isLoginMode) {\n      // Логін\n      try {\n        const response = await fetch('http://localhost:3009/auth/login', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ email, password }),\n        });\n        if (!response.ok) {\n          throw new Error('Невірний email або пароль');\n        }\n        const data = await response.json();\n        onLogin(\n          {\n            email: data.user.email,\n            role: data.user.role,\n            name: data.user.name,\n            surname: data.user.surname,\n          },\n          data.access_token\n        );\n      } catch (err) {\n        setError('Помилка авторизації');\n      }\n    } else {\n      // Реєстрація\n      try {\n        const response = await fetch('http://localhost:3009/auth/register', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ email, password, name, surname, role }),\n        });\n        if (!response.ok) {\n          const errorData = await response.json();\n          throw new Error(errorData.message.join(', ')); // Вивести всі повідомлення про помилки\n        }\n        const data = await response.json();\n        onLogin(\n          {\n            email: data.user.email,\n            role: data.user.role,\n            name: data.user.name,\n            surname: data.user.surname,\n          },\n          data.access_token\n        );\n      } catch (err) {\n        console.error('Registration Error:', err); // Додано для дебагу\n      }\n    }\n  };\n\n  return (\n    <div className={styles.loginContainer}>\n      <h2 className={styles.loginTitle}>{isLoginMode ? 'Avtorizatsiya' : 'Reiestratsiya'}</h2>\n\n      {/* Перемикання між логіном і реєстрацією */}\n      <div className={styles.modeToggle}>\n        <button\n          onClick={() => setIsLoginMode(true)}\n          className={isLoginMode ? styles.activeTab : styles.inactiveTab}\n        >\n          Увійти\n        </button>\n        <button\n          onClick={() => setIsLoginMode(false)}\n          className={!isLoginMode ? styles.activeTab : styles.inactiveTab}\n        >\n          Зареєструватися\n        </button>\n      </div>\n\n      {/* Форма */}\n      <input\n        type=\"email\"\n        placeholder=\"Email\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n        className={styles.loginInput}\n      />\n      <input\n        type=\"password\"\n        placeholder=\"Parol\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n        className={styles.loginInput}\n      />\n\n      {!isLoginMode && (\n        <>\n          <input\n            type=\"text\"\n            placeholder=\"Im’ya\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            className={styles.loginInput}\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Prizvyshche\"\n            value={surname}\n            onChange={(e) => setSurname(e.target.value)}\n            className={styles.loginInput}\n          />\n          <select\n            value={role}\n            onChange={(e) => setRole(e.target.value as 'user' | 'admin')}\n            className={styles.loginInput}\n          >\n            <option value=\"user\">User</option>\n            <option value=\"admin\">Admin</option>\n          </select>\n        </>\n      )}\n\n      <button onClick={handleSubmit} className={styles.loginButton}>\n        {isLoginMode ? 'Uviti' : 'Zareiestruvatysia'}\n      </button>\n      {error && <p className={styles.loginError}>{error}</p>}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 253, "column": 0}, "map": {"version":3,"sources":["file:///Users/markkits/Train-list/frontend/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport LoginForm from './components/LoginForm';\n\ninterface User {\n  email: string;\n  role: 'user' | 'admin';\n  name: string;\n  surname: string;\n}\n\nexport default function HomePage() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState<User | null>(null);\n  const [token, setToken] = useState<string | null>(null);\n  const router = useRouter();\n\n  // Перевірка авторизації при завантаженні сторінки\n  useEffect(() => {\n    const storedToken = localStorage.getItem('authToken');\n    const storedUser = localStorage.getItem('user');\n    if (storedToken && storedUser) {\n      setToken(storedToken);\n      setUser(JSON.parse(storedUser));\n      setIsAuthenticated(true);\n    }\n  }, []);\n\n  const handleLogin = (user: User, token: string) => {\n    setUser(user);\n    setToken(token);\n    localStorage.setItem('authToken', token);\n    localStorage.setItem('user', JSON.stringify(user));\n    setIsAuthenticated(true);\n    router.push('/pages/User'); // Перенаправлення на сторінку розкладу після логіну\n  };\n\n  const handleViewSchedule = () => {\n    if (isAuthenticated) {\n      router.push('/pages/User'); // Якщо авторизований, переходимо на сторінку розкладу\n    }\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('user');\n    setIsAuthenticated(false);\n    setUser(null);\n    setToken(null);\n  };\n\n  return (\n    <div style={{ padding: '20px', textAlign: 'center' }}>\n      <h1 style={{ fontSize: '28px', marginBottom: '20px' }}>Ласкаво просимо до розкладу поїздів!</h1>\n      <p style={{ fontSize: '16px', color: '#555', marginBottom: '30px' }}>\n        Дізнайтесь розклад поїздів, щоб спланувати свою подорож. Увійдіть, щоб переглянути деталі.\n      </p>\n\n      {isAuthenticated ? (\n        <div>\n          <p style={{ fontSize: '16px', marginBottom: '20px' }}>\n            Ви увійшли як: {user?.email} ({user?.role})\n          </p>\n          <button\n            onClick={handleViewSchedule}\n            style={{\n              padding: '10px 20px',\n              backgroundColor: '#007bff',\n              color: '#fff',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer',\n              marginRight: '10px',\n            }}\n          >\n            Переглянути розклад\n          </button>\n          <button\n            onClick={handleLogout}\n            style={{\n              padding: '10px 20px',\n              backgroundColor: '#dc3545',\n              color: '#fff',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer',\n            }}\n          >\n            Вийти\n          </button>\n        </div>\n      ) : (\n        <LoginForm onLogin={handleLogin} />\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAae,SAAS;IACtB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,kDAAkD;IAClD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,cAAc,aAAa,OAAO,CAAC;QACzC,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,IAAI,eAAe,YAAY;YAC7B,SAAS;YACT,QAAQ,KAAK,KAAK,CAAC;YACnB,mBAAmB;QACrB;IACF,GAAG,EAAE;IAEL,MAAM,cAAc,CAAC,MAAY;QAC/B,QAAQ;QACR,SAAS;QACT,aAAa,OAAO,CAAC,aAAa;QAClC,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAC5C,mBAAmB;QACnB,OAAO,IAAI,CAAC,gBAAgB,oDAAoD;IAClF;IAEA,MAAM,qBAAqB;QACzB,IAAI,iBAAiB;YACnB,OAAO,IAAI,CAAC,gBAAgB,sDAAsD;QACpF;IACF;IAEA,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,mBAAmB;QACnB,QAAQ;QACR,SAAS;IACX;IAEA,qBACE,8OAAC;QAAI,OAAO;YAAE,SAAS;YAAQ,WAAW;QAAS;;0BACjD,8OAAC;gBAAG,OAAO;oBAAE,UAAU;oBAAQ,cAAc;gBAAO;0BAAG;;;;;;0BACvD,8OAAC;gBAAE,OAAO;oBAAE,UAAU;oBAAQ,OAAO;oBAAQ,cAAc;gBAAO;0BAAG;;;;;;YAIpE,gCACC,8OAAC;;kCACC,8OAAC;wBAAE,OAAO;4BAAE,UAAU;4BAAQ,cAAc;wBAAO;;4BAAG;4BACpC,MAAM;4BAAM;4BAAG,MAAM;4BAAK;;;;;;;kCAE5C,8OAAC;wBACC,SAAS;wBACT,OAAO;4BACL,SAAS;4BACT,iBAAiB;4BACjB,OAAO;4BACP,QAAQ;4BACR,cAAc;4BACd,QAAQ;4BACR,aAAa;wBACf;kCACD;;;;;;kCAGD,8OAAC;wBACC,SAAS;wBACT,OAAO;4BACL,SAAS;4BACT,iBAAiB;4BACjB,OAAO;4BACP,QAAQ;4BACR,cAAc;4BACd,QAAQ;wBACV;kCACD;;;;;;;;;;;qCAKH,8OAAC,sIAAA,CAAA,UAAS;gBAAC,SAAS;;;;;;;;;;;;AAI5B","debugId":null}},
    {"offset": {"line": 405, "column": 0}, "map": {"version":3,"sources":["file:///Users/markkits/Train-list/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored[\n  'react-ssr'\n].ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CACxD,YACD,CAACC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"sources":["file:///Users/markkits/Train-list/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}